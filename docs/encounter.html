<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; Encounter Rate – Willow Tit Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./btodata.html" rel="next">
<link href="./enviro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-364982630eef5352dd1537128a8ed5cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./encounter.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Encounter Rate</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Willow Tit Project</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./species.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Species Overview</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./method.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Methodology</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./explore.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Exploratory Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./enviro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Environmental Variables</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./encounter.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Encounter Rate</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./btodata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">BTO Willow Tit data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#assessment-of-model" id="toc-assessment-of-model" class="nav-link active" data-scroll-target="#assessment-of-model"><span class="header-section-number">6.1</span> Assessment of model</a>
  <ul class="collapse">
  <li><a href="#mean-squared-error" id="toc-mean-squared-error" class="nav-link" data-scroll-target="#mean-squared-error"><span class="header-section-number">6.1.1</span> Mean squared error</a></li>
  <li><a href="#sensitivity" id="toc-sensitivity" class="nav-link" data-scroll-target="#sensitivity"><span class="header-section-number">6.1.2</span> Sensitivity</a></li>
  <li><a href="#specificity" id="toc-specificity" class="nav-link" data-scroll-target="#specificity"><span class="header-section-number">6.1.3</span> Specificity</a></li>
  <li><a href="#precision-recall-auc" id="toc-precision-recall-auc" class="nav-link" data-scroll-target="#precision-recall-auc"><span class="header-section-number">6.1.4</span> Precision recall AUC</a></li>
  <li><a href="#mean-squared-contingency-coefficient" id="toc-mean-squared-contingency-coefficient" class="nav-link" data-scroll-target="#mean-squared-contingency-coefficient"><span class="header-section-number">6.1.5</span> Mean squared contingency coefficient</a></li>
  <li><a href="#f-score" id="toc-f-score" class="nav-link" data-scroll-target="#f-score"><span class="header-section-number">6.1.6</span> F score</a></li>
  </ul></li>
  <li><a href="#habitat-associations" id="toc-habitat-associations" class="nav-link" data-scroll-target="#habitat-associations"><span class="header-section-number">6.2</span> Habitat associations</a>
  <ul class="collapse">
  <li><a href="#predictor-importance" id="toc-predictor-importance" class="nav-link" data-scroll-target="#predictor-importance"><span class="header-section-number">6.2.1</span> Predictor importance</a></li>
  <li><a href="#partial-dependence" id="toc-partial-dependence" class="nav-link" data-scroll-target="#partial-dependence"><span class="header-section-number">6.2.2</span> Partial dependence</a></li>
  </ul></li>
  <li><a href="#effort-variables" id="toc-effort-variables" class="nav-link" data-scroll-target="#effort-variables"><span class="header-section-number">6.3</span> Effort variables</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion"><span class="header-section-number">6.4</span> Discussion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Encounter Rate</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>As stated previously, I am still getting to grips with the theory and application of species distribution models. The eBird Willow Tit data is an excellent resource to learn how such models work using real-world data. However, many of the decisions and parameters of the model may not be the most suitable for UK Willow Tit data. I am still learning how best to approach this. I am also happy for any insight. Please feel free to submit suggestions or comments on <a href="https://github.com/jacvig/WillowTit2024/issues">GitHub</a>.</p>
<p>The encounter rate will measure the probability of an observer detecting a species during a standard birding session. In this case, it will be an eBird checklist. Ultimately, it is occupancy (the probability a species occurs at a site) that is most useful, but this is hard to measure with citizen-science data due to the variation in detectability. To address this, it can be useful to include effort covariates in the model so that the encounter rate is proportional to occupancy. Since Willow Tits in the UK are harder to detect, the encounter rate will be substantially lower than the occupancy rate.</p>
<p>The model developed by <span class="citation" data-cites="StrimasMackey">Strimas-Mackey (<a href="references.html#ref-StrimasMackey" role="doc-biblioref">2023</a>)</span> et.al. addresses class imbalance and spacial bias through spatial subsampling. A balanced random forest model is then trained and calibrated before using it to predict encounter rates across the study area and mapping these. The calibration model is trained by predicting the encounter rate for each checklist in the training set, then fitting a binomial Generalized Additive Model (GAM) with the real observed encounter rate as the response and the predicted encounter rate as the predictor variable. The R code is available in the file <a href="https://github.com/jacvig/WillowTit2024/blob/master/EncounterRate.R">EncounterRate.R</a>.</p>
<p>Before the random forest model was calibrated and run, the data were sub-sampled to address spatial bias,&nbsp;temporal bias, and&nbsp;class imbalance (see <a href="https://jacvig.github.io/Willow-Tit-Project/method.html">Ch 3 Methodology</a>). A grid of 3 km by 3 km square was made across the study region, then detections and non-detections were sub-sampled independently from the grid to ensure not too many detections were lost. To address temporal bias, one detection and one non-detection checklist were sampled from each grid cell for each week of each year.</p>
<section id="assessment-of-model" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="assessment-of-model"><span class="header-section-number">6.1</span> Assessment of model</h2>
<p>After running the calibrated random forest model, a set of predictive performance metrics were used to assess the model by comparing the predictions to the actual observations. The following PPMs resulted:</p>
<div class="cell">
<div id="fig-stats" class="cell-output-display quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">value</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">mse</td>
<td style="text-align: right;">0.007</td>
<td style="text-align: left;">mean squared error</td>
</tr>
<tr class="even">
<td style="text-align: left;">sensitivity</td>
<td style="text-align: right;">0.498</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">specificity</td>
<td style="text-align: right;">0.989</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">pr_auc</td>
<td style="text-align: right;">0.152</td>
<td style="text-align: left;">precision recall AUC</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mcc</td>
<td style="text-align: right;">0.367</td>
<td style="text-align: left;">mean squared contingency coefficient</td>
</tr>
<tr class="even">
<td style="text-align: left;">f1</td>
<td style="text-align: right;">0.360</td>
<td style="text-align: left;">F score</td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-stats-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6.1: Assessment of the calibrated random forest model
</figcaption>
</figure>
</div>
</div>
<section id="mean-squared-error" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="mean-squared-error"><span class="header-section-number">6.1.1</span> Mean squared error</h3>
<p>This is the average distance between observed and predicted values. A value closer to 0 means a higher model accuracy. So a value of 0.007 means the model has a high accuracy predicting observations.</p>
</section>
<section id="sensitivity" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="sensitivity"><span class="header-section-number">6.1.2</span> Sensitivity</h3>
<p>This is the proportion of true presences that are correctly identified. A high value indicates the model is good at predicting where a species is actually present, but a very high value could mean over prediction. A value of 0.498 means the model is correctly identifying actual positives just under 50% of the time. This means the model is poor at identifying true positives.</p>
</section>
<section id="specificity" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="specificity"><span class="header-section-number">6.1.3</span> Specificity</h3>
<p>This is the proportion of true absences that are correctly identified. A high value indicates the model is good at predicting where a species is absent. A value of 0.988 means the model is correctly identifying true negatives 98% of the time and is therefore highly reliable.</p>
</section>
<section id="precision-recall-auc" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="precision-recall-auc"><span class="header-section-number">6.1.4</span> Precision recall AUC</h3>
<p>This is the proportion of predicted presences actually present plotted against the proportion of actual presences correctly predicted. A value of 0.152 means the model is very poor at identifying a positive presence.</p>
</section>
<section id="mean-squared-contingency-coefficient" class="level3" data-number="6.1.5">
<h3 data-number="6.1.5" class="anchored" data-anchor-id="mean-squared-contingency-coefficient"><span class="header-section-number">6.1.5</span> Mean squared contingency coefficient</h3>
<p>This is the measure of association between two binary (categorical) variables. A value of 0.367 means there is a some association between variables but they do not have a particularly strong association; there is still a degree of independence between them.</p>
</section>
<section id="f-score" class="level3" data-number="6.1.6">
<h3 data-number="6.1.6" class="anchored" data-anchor-id="f-score"><span class="header-section-number">6.1.6</span> F score</h3>
<p>This is the measure of predictive performance of the model, how well the model balances precision and recall. A value of 0.360 means the model is poor. In this case, it is missing many positive cases (low recall) as shown from the sensitivity score.</p>
</section>
</section>
<section id="habitat-associations" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="habitat-associations"><span class="header-section-number">6.2</span> Habitat associations</h2>
<p>Two additional measures were produced through fitting the random forest model: predictor importance and partial dependence.</p>
<section id="predictor-importance" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="predictor-importance"><span class="header-section-number">6.2.1</span> Predictor importance</h3>
<p>This is the measure of each variable to predict the presence of Willow Tits and gives an idea of which variables are most important.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/PredictorImportance.png" class="img-fluid figure-img"></p>
<figcaption>Predictor importance</figcaption>
</figure>
</div>
<p>The top six variables that affect Willow Tit detections are:</p>
<ol type="1">
<li>Effort in hours</li>
<li>Mean elevation</li>
<li>Edge density savanna type (i.e.&nbsp;tree cover 10-30%, canopy &gt;2m)</li>
<li>Elevation standard deviation</li>
<li>Landcover savanna type</li>
<li>Edge density urban type (i.e.&nbsp;at least 30% impervious surface area)</li>
</ol>
<p>These results are interesting and seems to fit with what is known about Willow Tits. The top variable is an effort variable, which is to be expected since Willow Tits are harder to detect than more common species. So the more time spent, the more likely one would observe a Willow Tit.</p>
<p>Effort is then followed by environmental variables which, perhaps, support the research that habitat is a vital factor for Willow Tits. That is, they require more specialised habitat than other common species. The model shows that elevation plays a role followed by 10-30% tree cover, both as part of a landscape’s edge and area. These fit well with what is known: that Willow Tits tend to be observed along edges such as scrub lines, and in areas of forest where there are lower canopies dominated by pioneer species (such as birch) which tend to be smaller or less dense.</p>
</section>
<section id="partial-dependence" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="partial-dependence"><span class="header-section-number">6.2.2</span> Partial dependence</h3>
<p>This estimates the marginal effect of one predictor holding all other predictors constant. These are calculated by predicting encounter rate at a regular sequence of points across the full range of values of a given predictor. Partial dependence has been calculated for the top six predictors.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/Topvariables.png" class="img-fluid figure-img"></p>
<figcaption>Partial dependence</figcaption>
</figure>
</div>
<p>Each graph shows the encounter rate (along the y-axis) for each predictor. These results seem consistent with what is known about the species, e.g.&nbsp;Willow Tits tend to be found at lower elevations, along edges, and where the landscape has a percentage of tree cover between 10-30%. There is also some suggestion that Willow Tits are found along the edges of urban areas.</p>
</section>
</section>
<section id="effort-variables" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="effort-variables"><span class="header-section-number">6.3</span> Effort variables</h2>
<p>In order to make predictions, effort variables will need to be added to the model. To do this, predictions for a standard eBird checklist will provide the paradigm. I have chosen to alter the suggested checklist guide of 2km at 1 hour travelling at peak time of day to better reflect the increased probability of effort, that is, spending longer birding. Therefore, I have chosen to use 2km at 2 hours traveling at peak time of day.</p>
<p>The peak time of day was found alongside partial dependence:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/StandardisedEffortVariables.png" class="img-fluid figure-img"></p>
<figcaption>Time of day with highest detectability probability</figcaption>
</figure>
</div>
<p>The first graph is the same as one created earlier in <a href="https://jacvig.github.io/Willow-Tit-Project/explore.html">Chapter 4 Exploratory Analysis</a>, and shows that the greatest number of checklists occur between 8:00-10:00. The second graph shows the encounter rate across the day. The first and last values were trimmed to maximise the encounter rate and avoid extrapolation. Based on this calculation, the peak time of day for detecting Willow Tits is 6.866 i.e.&nbsp;06:51.</p>
<p>This time was then added to the effort variables (2km, 2 hours) to make predictions for the middle of the focal window of the latest year: 16 March 2023.</p>
<p>Range estimates were then made across the entire study area and mapped:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/predictiontest1.png" class="img-fluid figure-img"></p>
<figcaption>Predicted range of Willow Tit for March 2023 if performing a 2km checklist at 2 hours.</figcaption>
</figure>
</div>
<p>This map shows the expected range where Willow Tits would be encountered in March if birding across a 2km area for 2 hours. From the maps in Chapter 4, this shows a reduced area, albeit consistent with our understanding of the current range of Willow Tits.</p>
<p>The predicted encounter rate was then mapped for the entire study area:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/EncounterRate.png" class="img-fluid figure-img"></p>
<figcaption>Predicted encounter rate for Willow Tit</figcaption>
</figure>
</div>
<p>This map shows more detail about predicted encounter rate (probability of an observer detecting a species during a standard birding session). Be aware that this is probably lower than occupancy rate (probability a species occurs at a site), but having applied effort and environmental variables, it is hoped that they are proportionate. Still, considering the decline of Willow Tits, the likelihood of detecting a species is still low.</p>
</section>
<section id="discussion" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="discussion"><span class="header-section-number">6.4</span> Discussion</h2>
<p>Considering the range is very similar to the current known picture, it perhaps tells us that there is already a good understanding of where Willow Tits occur. More importantly, it suggests areas that Willow Tits are currently not recorded, but could be prioritised for conservation efforts, specifically areas of Wales, Somerset, Devon, and Cornwall, as well as more areas of Scotland and Northern Ireland.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-StrimasMackey" class="csl-entry" role="listitem">
Strimas-Mackey, Hochachka, M. 2023. <span>“Best Practices for Using eBird Data.”</span> Ithica, New York: Cornell Lab of Ornithology. <a href="https://doi.org/10.5281/zenodo.3620739">https://doi.org/10.5281/zenodo.3620739</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./enviro.html" class="pagination-link" aria-label="Environmental Variables">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Environmental Variables</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./btodata.html" class="pagination-link" aria-label="BTO Willow Tit data">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">BTO Willow Tit data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>